import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var c in n)t.o(n,c)&&!t.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:n[c]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(o={getContext:()=>e.getContext,store:()=>e.store},s={},t.d(s,o),s),{actions:c}=(0,n.store)("mosne-text-to-speech-block",{state:{isPlaying:!1,currentVoice:null,utterance:null,voices:[],currentSpeed:1,currentPitch:1},actions:{async loadVoices(){const e=(0,n.getContext)(),t=window.speechSynthesis.getVoices();e.voices=t,e.currentVoice=t[0];const o=document.documentElement.lang,s=t.filter((e=>e.lang.startsWith(o)));s.length>0&&(e.voices=s,e.currentVoice=s[0]),c.createUtterance()},createUtterance(){const e=(0,n.getContext)(),t=c.getContent(),o=new SpeechSynthesisUtterance(t);o.lang=document.documentElement.lang,o.rate=e.currentSpeed,o.pitch=e.currentPitch,e.currentVoice?o.voice=e.currentVoice:console.warn("Current Voice not found"),e.utterance=o},upadateUtterance(){const e=(0,n.getContext)();e.utterance?(window.speechSynthesis.cancel(),e.isPlaying=!1,c.createUtterance()):console.warn("Utterance not found")},Play(){const e=(0,n.getContext)();e.isPlaying=!0,window.speechSynthesis.paused?window.speechSynthesis.resume():e.utterance?(window.speechSynthesis.cancel(),window.speechSynthesis.speak(e.utterance)):console.warn("Utterance not found")},Pause(){(0,n.getContext)().isPlaying=!1,window.speechSynthesis.pause()},Restart(){(0,n.getContext)().isPlaying=!1,window.speechSynthesis.cancel()},changeVoice(e){const t=(0,n.getContext)();t.isPlaying=!1;const o=t.voices.find((t=>t.voiceURI===e.target.value));window.speechSynthesis.cancel(),o?(t.currentVoice=o,c.upadateUtterance()):console.warn("Voice not found")},changeSpeed(e){(0,n.getContext)().currentSpeed=e.target.value,c.upadateUtterance()},changePitch(e){(0,n.getContext)().currentPitch=e.target.value,c.upadateUtterance()},toggleSettings(){const e=(0,n.getContext)();e.showSettings=!e.showSettings},getContent(){let e="",t=document.querySelector("main").cloneNode(!0);return t&&(t.querySelectorAll(".skip-speech").forEach((e=>{e.remove()})),e=t.textContent,t=null),e}},callbacks:{init(){window.speechSynthesis&&(window.speechSynthesis.cancel(),c.loadVoices(),void 0!==window.speechSynthesis.onvoiceschanged&&(window.speechSynthesis.onvoiceschanged=c.loadVoices))},isSelected(){const e=(0,n.getContext)();return e.voice.voiceURI===e.currentVoice.voiceURI}}});var o,s;